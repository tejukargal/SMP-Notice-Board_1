<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMP College Notice Board</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Kalam:wght@300;400;700&family=Noto+Sans+Kannada:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="header-left">
                    <h1 class="app-title">
                        <i class="fas fa-graduation-cap"></i>
                        SMP College Notice Board
                    </h1>
                    <div class="sync-status" id="syncStatus">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <span>Syncing...</span>
                    </div>
                </div>
                <div class="header-controls">
                    <!-- Header controls removed - moved to mobile controls -->
                </div>
            </div>
        </header>

        <!-- Sub Header (Temporary Display) -->
        <div class="sub-header" id="subHeader">
            <div class="sub-header-content">
                <div class="institution-info">
                    <p class="institution-name">SANJAY MEMORIAL POLYTECHNIC</p>
                    <p class="institution-name-kannada">ಸಂಜಯ್ ಮೆಮೋರಿಯಲ್ ಪಾಲಿಟೆಕ್ನಿಕ್</p>
                </div>
                <div class="purpose-info">
                    <p class="purpose-text">Results • Notices • Memos • Announcements</p>
                    <p class="purpose-text-kannada">ಫಲಿತಾಂಶಗಳು • ಸೂಚನೆಗಳು • ಮೆಮೊಗಳು • ಪ್ರಕಟನೆಗಳು</p>
                </div>
            </div>
        </div>


        <main class="main-content">
            <div class="notices-container" id="noticesContainer" tabindex="0" role="region" aria-label="Notice cards">
                <!-- Notices will be dynamically generated here -->
            </div>
            
            <!-- Category Filter Section -->
            <div class="category-filter-section">
                <div class="filter-buttons">
                    <button class="filter-btn active" data-category="all">
                        <i class="fas fa-th-large"></i>
                        <span>All</span>
                    </button>
                    <button class="filter-btn" data-category="academic">
                        <i class="fas fa-graduation-cap"></i>
                        <span>Academic</span>
                    </button>
                    <button class="filter-btn" data-category="events">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Events</span>
                    </button>
                    <button class="filter-btn" data-category="exams">
                        <i class="fas fa-file-alt"></i>
                        <span>Exams</span>
                    </button>
                    <button class="filter-btn" data-category="urgent">
                        <i class="fas fa-exclamation-triangle"></i>
                        <span>Urgent</span>
                    </button>
                    <button class="filter-btn" data-category="scholarship">
                        <i class="fas fa-award"></i>
                        <span>Scholarship</span>
                    </button>
                    <button class="filter-btn" data-category="fee-payments">
                        <i class="fas fa-credit-card"></i>
                        <span>Fee Payments</span>
                    </button>
                    <button class="filter-btn" data-category="admission">
                        <i class="fas fa-door-open"></i>
                        <span>Admission</span>
                    </button>
                    <button class="filter-btn" data-category="placement">
                        <i class="fas fa-briefcase"></i>
                        <span>Placement</span>
                    </button>
                    <button class="filter-btn" data-category="library">
                        <i class="fas fa-book"></i>
                        <span>Library</span>
                    </button>
                </div>
            </div>
            
            <!-- Simple Navigation Bar Below Cards -->
            <div class="notices-navigation" id="noticesNavigation">
                <div class="nav-scrollbar" id="navScrollbar">
                    <div class="nav-track" id="navTrack"></div>
                </div>
            </div>

            <div class="empty-state" id="emptyState" style="display: none;">
                <i class="fas fa-clipboard-list"></i>
                <h3>No notices found</h3>
                <p>Be the first to add a notice to the board!</p>
            </div>
        </main>

        <!-- Floating Action Button -->
        <button class="fab admin-only" id="addNoticeBtn" title="Add New Notice (Ctrl+N)" style="display: none;">
            <i class="fas fa-plus"></i>
        </button>

        <!-- Mobile Bottom Controls -->
        <div class="mobile-controls">
            <button class="mobile-btn" id="mobileFilter">
                <i class="fas fa-filter"></i>
                <span>Filter</span>
            </button>
            <button class="mobile-btn admin-only" id="mobileAdd" style="display: none;">
                <i class="fas fa-plus"></i>
                <span>Add</span>
            </button>
            <button class="mobile-btn" id="themeToggle" title="Toggle Dark Mode">
                <i class="fas fa-moon"></i>
                <span>Theme</span>
            </button>
            <button class="mobile-btn" id="adminToggle" title="Admin Login">
                <i class="fas fa-user-shield"></i>
                <span>Admin</span>
            </button>
        </div>
    </div>

    <!-- Notice Modal -->
    <div class="modal" id="noticeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Add New Notice</h2>
                <button class="modal-close" id="closeModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form class="modal-body" id="noticeForm">
                <div class="form-group">
                    <label for="noticeTitle">Title *</label>
                    <input type="text" id="noticeTitle" required maxlength="100">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="noticeCategory">Category *</label>
                        <select id="noticeCategory" required>
                            <option value="">Select Category</option>
                            <option value="academic">Academic</option>
                            <option value="events">Events</option>
                            <option value="exams">Exams</option>
                            <option value="urgent">Urgent</option>
                            <option value="scholarship">Scholarship</option>
                            <option value="fee-payments">Fee Payments</option>
                            <option value="admission">Admission</option>
                            <option value="placement">Placement</option>
                            <option value="library">Library</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="noticePriority">Priority</label>
                        <select id="noticePriority">
                            <option value="normal">Normal</option>
                            <option value="high">High</option>
                            <option value="critical">Critical</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="noticeOrder">Display Order</label>
                        <select id="noticeOrder">
                            <!-- Options will be populated dynamically -->
                        </select>
                        <small class="form-help">Lower numbers appear first in the list</small>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="noticeDate">Date *</label>
                        <input type="date" id="noticeDate" required>
                    </div>
                    <div class="form-group">
                        <label for="noticeDeadline">Deadline (Optional)</label>
                        <input type="date" id="noticeDeadline">
                    </div>
                </div>

                <div class="form-group">
                    <label for="noticeAuthor">Department/Author</label>
                    <input type="text" id="noticeAuthor" placeholder="e.g., Computer Science Department">
                </div>

                <div class="form-group">
                    <label for="noticeTags">Tags (Keywords)</label>
                    <div class="tags-input-container">
                        <div class="tags-display" id="tagsDisplay"></div>
                        <input type="text" id="tagInput" placeholder="Add tags (press Enter)" class="tag-input">
                    </div>
                    <small class="form-help">Add relevant keywords to help categorize and find this notice</small>
                </div>

                <div class="form-group">
                    <label for="noticeAttachments">Attachments</label>
                    <div class="file-input-container">
                        <input type="file" id="noticeAttachments" multiple accept=".jpg,.jpeg,.png,.gif,.pdf,.csv,.doc,.docx,.txt" class="file-input">
                        <div class="file-input-label" id="fileInputLabel">
                            <i class="fas fa-paperclip"></i>
                            <span>Choose files or drag & drop</span>
                            <small>Images, PDFs, CSV, Documents (Max 5MB each)</small>
                        </div>
                    </div>
                    <div class="attachments-preview" id="attachmentsPreview"></div>
                </div>

                <div class="form-group">
                    <label for="noticeContent">Content *</label>
                    <div id="noticeContent" class="quill-editor"></div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelNotice">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="saveNotice">Save Notice</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div class="modal" id="adminModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Admin Login</h2>
                <button class="modal-close" id="closeAdminModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="adminCode">Admin Code</label>
                    <input type="password" id="adminCode" placeholder="Enter admin code">
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelAdmin">Cancel</button>
                    <button type="button" class="btn btn-primary" id="loginAdmin">Login</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Notice Details Modal -->
    <div class="modal" id="detailsModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2 id="detailsTitle"></h2>
                <div class="modal-actions">
                    <button class="btn btn-icon admin-only" id="editNoticeBtn" title="Edit Notice" style="display: none;">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn btn-icon admin-only" id="deleteNoticeBtn" title="Delete Notice" style="display: none;">
                        <i class="fas fa-trash"></i>
                    </button>
                    <button class="modal-close" id="closeDetailsModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="modal-body">
                <div class="notice-meta" id="noticeMeta"></div>
                <div class="notice-content-display" id="noticeContentDisplay"></div>
            </div>
        </div>
    </div>

    <!-- Export Modal -->
    <div class="modal" id="exportModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Export Data</h2>
                <button class="modal-close" id="closeExportModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="export-options">
                    <button class="export-btn" id="exportJSON">
                        <i class="fas fa-file-code"></i>
                        <span>Export as JSON</span>
                    </button>
                    <button class="export-btn" id="exportCSV">
                        <i class="fas fa-file-csv"></i>
                        <span>Export as CSV</span>
                    </button>
                    <button class="export-btn" id="exportPDF">
                        <i class="fas fa-file-pdf"></i>
                        <span>Export as PDF</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-spinner">
            <i class="fas fa-spinner fa-spin"></i>
            <p>Loading...</p>
        </div>
    </div>

    <!-- Hidden File Input for Import -->
    <input type="file" id="fileInput" accept=".json" style="display: none;">

    <script src="https://cdn.quilljs.com/1.3.6/quill.min.js"></script>
    <script src="https://apis.google.com/js/api.js"></script>
    <script>
        // JSONhost.com Configuration
        // To set up JSONhost integration:
        // 1. Create a JSON file at https://jsonhost.com/
        // 2. Replace 'YOUR_JSON_ID' with your actual JSON ID from the URL
        // 3. Get your API Authorization token from the JSONhost admin interface
        // 4. Replace 'YOUR_API_TOKEN' with your actual token
        // 5. Enable POST/PATCH requests in JSONhost admin settings
        
        window.CLOUD_CONFIG = {
            service: 'jsonhost',
            jsonhost: {
                // Example: if your JSONhost URL is https://jsonhost.com/json/abc123def456
                // then your jsonId is 'abc123def456'
                jsonId: 'f20bbd47f6d0960afd4b223442e0c2b8', // Replace with your actual JSON ID
                apiToken: 'mqvlc7eqvavhd0vevv2y0qbndahywhsz', // Replace with your API Authorization token
                baseUrl: 'https://jsonhost.com/json/'
            },
            googledrive: {
                // To enable Google Drive file storage:
                // 1. Go to Google Cloud Console (console.cloud.google.com)
                // 2. Create a new project or select existing one
                // 3. Enable Google Drive API
                // 4. Create credentials (API Key for public access)
                // 5. Replace the values below
                apiKey: 'AIzaSyCXq0pUbA1Q8QDctRhuZ2Mhqe1MDGozKuE', // Replace with your Google Drive API key
                clientId: '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', // Replace with your OAuth 2.0 client ID
                enabled: false, // Set to true when configured
                folderName: 'SMP-Notice-Board-Attachments'
            }
        };
    </script>
    <script src="script.js"></script>
</body>
</html>